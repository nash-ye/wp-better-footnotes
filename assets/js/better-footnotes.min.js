!function(t){"use strict";var o={options:{scrollGap:0,scrollSpeed:0,groupFootnotes:0},occurenceLog:[],init:function(){"undefined"!=typeof betterFootnotesOptions&&(o.options=Object.assign(o.options,betterFootnotesOptions)),o.populateFootnotesLists(),t(document).on("click",".bfn-footnoteRef, .bfn-footnoteHook",function(e){e.preventDefault();var n=t(t(this).attr("href")+":first");n.length&&o.scrollTo(n,o.options.scrollSpeed)})},populateFootnotesLists:function(e){t(".bfn-footnotes",e).each(function(){o.populateFootnotesList(this)})},populateFootnotesList:function(e){if(!(e=t(e)).data("is-populated")){var n=e.attr("data-post-id"),r=e.attr("data-container");r||(r="#post-"+n),t(".bfn-footnoteHook",r).each(function(){var e=t(this),r=o.logOccurence(e.data("footnote-content")),i=o.occurenceLog[r-1].count;o.populateFootnoteHook(e,n,r,i)}),this.generateFootnotesList(n,e)}},populateFootnoteHook:function(t,e,n,r){var i=o.generateFootnoteId(e,n),c=o.generateFootnoteHookId(e,n,r);return t.attr("id",c),t.attr("href","#"+i),t.attr("data-footnote-id",i),"numeric"!==t.attr("data-footnote-type")&&1!=o.options.groupFootnotes||t.text(n),t},generateFootnoteHookId:function(t,e,n){var r="article-footnote-hook-"+t+"-"+e;return 1==o.options.groupFootnotes?r+"-"+n:r},generateFootnoteId:function(t,o){return"article-footnote-"+t+"-"+o},generateFootnoteRef:function(o,e,n,r,i){var c=t("<a></a>"),a="numeric"===i?n:String.fromCharCode(96+r);return c.text(a),c.addClass("bfn-footnoteRef"),c.attr("href","#"+o),"numeric"===i?c.attr("id",e):c.addClass("bfn-footnoteRef-child"),c},generateFootnoteItem:function(o,e,n,r,i){var c=t("<li></li>");if(c.addClass("bfn-footnoteItem"),c.append(this.generateFootnoteRef(n,r,i,1,"numeric")),c.append("&nbsp;"),o.count>1)for(var a=1;a<=o.count;a++)n=a>1?this.generateFootnoteHookId(e,i,a):n,c.append(this.generateFootnoteRef(n,r,i,a)),c.append("&nbsp;");return c.append(o.contentRaw),c},generateFootnotesList:function(o,e){for(var n=t(".bfn-footnotesList",e),r=0;r<this.occurenceLog.length;r++){var i=this.occurenceLog[r],c=r+1,a=this.generateFootnoteHookId(o,c,1),s=this.generateFootnoteId(o,c);n.append(this.generateFootnoteItem(i,o,a,s,c))}n.is(":empty")||e.show()},scrollTo:function(e,n){o.isDefined(n)&&!1!==n||(n=800);var r=e.offset().top-o.options.scrollGap;!1!==n||0!==n?t("html, body").animate({scrollTop:r},n,"easeOutCubic").promise().done(function(){}):t("html, body").scrollTop(r)},isDefined:function(t){return void 0!==t&&!1!==t},getOccurenceIndex:function(t){for(var o=0;o<this.occurenceLog.length;o++)if(this.occurenceLog[o].content==t)return o;return-1},logOccurence:function(t){var o=t.toLowerCase();if(1==this.options.groupFootnotes){var e=this.getOccurenceIndex(o);if(e>=0)return this.occurenceLog[e].count++,e+1}return this.occurenceLog.push({content:o,contentRaw:t,count:1})}};jQuery.extend(jQuery.easing,{easeOutCubic:function(t,o,e,n,r){return n*((o=o/r-1)*o*o+1)+e}}),t(document).ready(o.init)}(jQuery);